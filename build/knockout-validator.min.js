// Knockout Validator v0.1.0
(function(e){"use strict";var t={version:"@@version",methods:{},messages:{},options:{validClass:"valid",errorClass:"error"},optional:function(e){return!this.methods.required(e(),e,!0)},addMethod:function(e,t,n){this.methods[e]=t.bind(this),this.messages[e]=n},validate:function(e){return this.utils.validateObject(e)}};e.validator=t})(ko),function(e){"use strict";var t=e.validator,n,r,i,s,o=function(e){return e.validator!==undefined},u=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},a=function(e){return typeof e=="function"},f=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/\{(\d+)\}/g,function(e,n){return t[n]!==undefined?t[n]:e})};n=function(e){var t=!0,n,i;if(!u(e))throw new TypeError("Object is not an array");for(i=0;i<e.length;i+=1)n=r(e[i]),n||(t=n);return t},r=function(t){var i=!0,o,a;if(e.isWriteableObservable(t))i=s(t);else{a=e.utils.unwrapObservable(t);if(u(a))i=n(t);else if(typeof a=="object")for(o in t)t.hasOwnProperty(o)&&(r(t[o])||(i=!1))}return i},i=function(t){var n=e.utils.unwrapObservable(t);return typeof n=="function"&&(n=n()),n},s=function(){function r(e,t){var n;return a(e)?n=e(t):n=f(e,t),n}function s(e,n){var s=t.methods[n],o=e.validator,u=o.rules[n],a,f,l,c,h;return n!=="messages"&&(c=i(u),c!==!1&&(l=s(e(),e,c)!==!1,l||(a=o.rules.messages,f=a[n]||t.messages[n],h=r(f,c)))),h}return function(t){var r,i,a,f,l=!0,c=[],h;if(o(t)){f=t.validator,i=f.rules;for(r in i)i.hasOwnProperty(r)&&(h=s(t,r),h!==undefined&&c.push(h));f.errors(c),l=f.valid()}else a=e.utils.unwrapObservable(t),u(a)&&(l=n(a));return l}}(),t.utils={format:f,isValidatable:o,unwrap:i,validateArray:n,validateObject:r,validateObservable:s}}(ko),function(e){"use strict";var t=e.validator.utils;e.validator.addMethod("required",function(e){return e!==undefined&&e!==null&&e!==""},"This field is required."),e.validator.addMethod("number",function(e,t){return this.optional(t)||!isNaN(+e)},"Please enter a valid number."),e.validator.addMethod("min",function(e,t,n){return this.optional(t)||e>=n},"Please enter a value greater than or equal to {0}."),e.validator.addMethod("max",function(e,t,n){return this.optional(t)||e<=n},"Please enter a value less than or equal to {0}."),e.validator.addMethod("digits",function(e,t){return this.optional(t)||/^\d+$/.test(e)},"Please enter only digits."),e.validator.addMethod("range",function(e,t,n){return this.optional(t)||e>=n.min&&e<=n.max},function(e){return t.format("Please enter a value between {0} and {1}.",e.min,e.max)}),e.validator.addMethod("date",function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},"Please enter a valid date."),e.validator.addMethod("dateISO",function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{2}[\/\-]\d{2}$/.test(e)},"Please enter a valid date (ISO)."),e.validator.addMethod("url",function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},"Please enter a valid URL."),e.validator.addMethod("email",function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},"Please enter a valid email address."),e.validator.addMethod("minlength",function(e,t,n){return this.optional(t)||typeof e=="string"&&e.length>=n},"Please enter at least {0} characters."),e.validator.addMethod("maxlength",function(e,t,n){return this.optional(t)||typeof e=="string"&&e.length<=n},"Please enter no more than {0} characters."),e.validator.addMethod("rangelength",function(e,t,n){return this.optional(t)||typeof e=="string"&&e.length>=n.min&&e.length<=n.max},function(e){return t.format("Please enter a value between {0} and {1} characters long.",e.min,e.max)})}(ko),function(e){"use strict";var t=e.validator,n=t.utils;e.extenders.rules=function(){function r(t){var r=e.observableArray(),i=e.computed(function(){return r()[0]}),s={rules:{messages:{}},errors:r,valid:e.computed(function(){return i()===undefined}),message:i,validate:function(){return n.validateObservable(t)}};t.validator=s,t.subscribe(function(){s.validate()})}function i(e){return function(){(!e.validator.valid()||!t.optional(e))&&n.validateObservable(e)}}function s(t,n){var r,s;for(r in n)n.hasOwnProperty(r)&&r!=="messages"&&(s=n[r],e.isSubscribable(s)&&s.subscribe(i(t)))}return function(t,i){return n.isValidatable(t)||r(t),e.utils.extend(t.validator.rules,i),s(t,i),t}}()}(ko),function(e){"use strict";var t=e.validator,n=t.utils,r=e.utils,i=[{attr:"required",method:"required",message:"data-val-required"},{attr:"min",method:"min",message:"data-val-min"},{attr:"max",method:"max",message:"data-val-max"},{attr:"maxlength",method:"maxlength",message:"data-val-maxlength"}];e.bindingHandlers.validate={init:function(e,t,n,s){var o=t(),u=n(),a=r.extend({messages:{}},u.rules||{});r.arrayForEach(i,function(t){e.attributes[t.attr]&&(a[t.method]=e.attributes[t.attr].value,e.attributes[t.message]&&(a.messages[t.method]=e.attributes[t.message].value))}),o.extend({rules:a})},update:function(e,n,i,s){var o=n(),u=o.validator.valid();r.toggleDomNodeCssClass(e,t.options.validClass,u),r.toggleDomNodeCssClass(e,t.options.errorClass,!u)}},e.bindingHandlers.validationMessage={init:function(e){r.toggleDomNodeCssClass(e,t.options.errorClass,!0)},update:function(e,t,n,i){var s=t(),o=s.validator.valid();o?r.setHtml(e,""):r.setHtml(e,s.validator.message())}}}(ko);